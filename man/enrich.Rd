% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reindeer_enrich.R
\name{enrich}
\alias{enrich}
\alias{furnish}
\title{Enrich corpus with DSP-derived tracks}
\usage{
enrich(
  corpus_obj,
  .using,
  ...,
  .metadata_fields = c("Gender", "Age"),
  .signal_extension = NULL,
  .force = FALSE,
  .verbose = TRUE,
  .parallel = TRUE,
  .workers = NULL
)

furnish(
  corpus_obj,
  .using,
  ...,
  .metadata_fields = c("Gender", "Age"),
  .signal_extension = NULL,
  .force = FALSE,
  .verbose = TRUE,
  .parallel = TRUE,
  .workers = NULL
)
}
\arguments{
\item{corpus_obj}{A corpus object}

\item{.using}{A DSP function from superassp package (e.g., forest, ksvF0)}

\item{...}{Additional arguments passed to the DSP function}

\item{.metadata_fields}{Character vector of metadata fields to use for parameter derivation
Default: c("Gender", "Age")}

\item{.signal_extension}{File extension of signal files to process.
Default: NULL (uses mediafileExtension from corpus config)}

\item{.force}{Logical; if TRUE, recompute even if track files exist}

\item{.verbose}{Logical; show progress and diagnostic messages}

\item{.parallel}{Logical; use parallel processing (default TRUE)}

\item{.workers}{Number of parallel workers (default: parallel::detectCores() - 1)}
}
\value{
The corpus object (invisibly), with new SSFF track files created
}
\description{
Apply digital signal processing (DSP) functions from the superassp package
to all signal files in a corpus, using metadata-driven parameter configuration.
This function reads bundle and session-level metadata to determine optimal
DSP parameters (e.g., formant analysis settings based on speaker age and gender).
}
\details{
The function performs the following steps:
\enumerate{
\item Lists all signal files with the specified extension (or mediafileExtension)
\item For each bundle, retrieves metadata (with database -> session -> bundle inheritance)
\item Maps metadata fields to DSP function parameters (e.g., Age/Gender -> nominalF1)
\item Applies the DSP function with derived parameters
\item Registers new tracks in database configuration
}

Metadata-to-parameter mapping follows these rules:
\itemize{
\item Age and Gender are used to estimate formant frequencies (nominalF1, maxFormantHz)
\item Other metadata fields are matched by name to function formals
\item Database-level defaults apply unless overridden at session or bundle level
}

Parallel processing is used by default for improved performance on multi-core systems.
Set .parallel = FALSE to disable parallel processing (useful for debugging).
}
\examples{
\dontrun{
# Enrich corpus with formant tracks
corp \%>\% enrich(.using = superassp::forest)

# With explicit parameters
corp \%>\% enrich(.using = superassp::ksvF0, 
                minF = 75, maxF = 500,
                .force = TRUE)

# Disable parallel processing
corp \%>\% enrich(.using = superassp::forest, .parallel = FALSE)
}

}
\seealso{
\code{\link[=quantify]{quantify()}}, \code{\link[=peek_signals]{peek_signals()}}
}
