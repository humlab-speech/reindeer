% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/reindeeR_metadata.R
\name{get_metadata}
\alias{get_metadata}
\alias{export_metadata}
\title{Functions for gathering metata specified for recordings in an emuR database.}
\usage{
get_metadata(emuDBhandle, overwrite = FALSE, session = ".*")

export_metadata(emuDBhandle, Excelfile = NULL, overwrite = FALSE)
}
\arguments{
\item{emuDBhandle}{The database handle of an emuR database.}

\item{overwrite}{The default behaviour is that an Excel file should not be
overwritten if it exists already. If this parameter is \code{TRUE} then the file will be overwritten.}

\item{Excelfile}{The full path and file name of the Excel file that the metadata should be written to. The function will not overwrite this file, unless \code{overwrite} is set to \code{TRUE}.}
}
\value{
A data frame containing inforamtion about the 'meta_json' files found
\describe{
\item{session}{The name of the session.}
\item{bundle}{The bundle name}
}
In addition, the \code{\link[dplyr]{tibble}} will contain one column for every type of information given in any of the 'meta_json' files.
}
\description{
Metadata of a recording is stored in 'meta_json' files. Metadata may be set at the database, session and bundle level.
The functions goes through the database metadata file, session metadata files and metadata files associated with
each bundle, parses the JSON data and returns \code{\link[dplyr]{tibble}} with one row per bundle in the database.
Database default values are supressed by information set in a session metadata file, and session level data are in
turn surpressed by data given at the bundle level.
The structure of the metadata does not have to be consistent across meta_json files.
New columns are added to the as new fields are detected.
}
\details{
The function \code{export_metadata} outputs the metadata as an Excel file instead, with bundle, session and database
tabs. The "bundle" tab gives the complete set of all the metadata that are active for each bundle, regardness where
it was set (for the bundle directly, or as a session / database default value).

The user is expected to use the functions \code{export_metadata} and \code{import_metadata} to fix
accedental inconsistencies in the metadata of a database across bundles by exporting all
information to an Excel file using \code{export_metadata}, edit columns and values (including moving inconsistently
spelled metadata fields into a single column with the intended name) using Excel or another editor that complies with
the OOXML Workbook ISO/IEC 29500:2008 standard. The user is also expected to keep the indented structure of the Excel
file (one row per bundle or session, and each column except for those indicating session and bundle names containing
metadata), otherwise it is possible that the file may not be read in again by \code{\link{import_metadata}} to set
updated values.
}
\examples{
\dontrun{
create_emuRdemoData()
ae <- load_emuDB(file.path(tempdir(),"emuR_demoData","ae_emuDB"))

# Database-wide default information
add_metadata(ae,list("Accent"="Northern","Elicitation"="Scripted"))
#Bundle specific information
add_metadata(ae,list("Speaker.Sex"="Male","Date"="2020-03-04"),session="0000",bundle="msajc003")
get_metadata(ae) -> res
print(res)
rm(ae)
unlink(file.path(tempdir(),"emuR_demoData"),recursive=TRUE)
}

}
